
<h1>E-shop Api</h1>
Тестовое задние для Effective Mobile
  
Backend-приложение с системой аутентификации и авторизации.<br>
(На примере Api для интернет магазина)

<h2>Описание задачи</h2>

Реализовать систему доступа к ресурсам, а именно:

<h3>1. Взаимодействие с пользователем</h3>
  <li>Регистрация: Ввод имени (фамилии, отчества), email, пароля, повтор
  пароля.
  <li> Обновление информации: Пользователь может редактировать свой
  профиль.
  <li> Удаление пользователя: Удаление аккаунта (мягкое) — пользователь
  инициирует удаление, происходит logout, пользователь больше не может
  залогиниться, но при этом в базе учетная запись остается со статусом
  is_active=False.
  <li> Login: пользователь входить в систему по email и паролю.
  <li> Logout: пользователь выходит из системы.

<h3>2. Система разграничения прав доступа</h3>
  <li> Таблицы для прав доступа
  <li> Уровни разрешений для разных ресурсов
  <li> Возможность получения и изменения этих правил
  пользователю, имеющему роль администратора.

<h3>3. База данных</h3>
    <li>Создать базу данных для теста системы


<h2>Описание основных моментов реализации:</h2>
  <h3>1. Удаление, LogIn и LogOut</h3>
    Юзеру при преходе по LogIn выдается jwt токен, в котором храниться его id и role.<br>
    Аутентификация(id), как и Авторизация(role) при следующих запросах происходит с помощью этого токена в header Authorization<br>
    При переходе по LogOut токен юзера переносится в "Черный список", он же TokenBlackList в базе данных и доступ по этим токенам становится недоступным.<br>
    При Удалении поле юзера is_active=False и его токен переносится в "Черный список".<br>

  <h3>2. Система разграничения прав доступа.</h3>
     Система основана на отношениях role-permission, где для каждой роли есть набор доступных ей разрешений<br>
     Схема всей базы данных:
     <img width="1282" height="781" alt="image" src="https://github.com/user-attachments/assets/61354208-d5e6-4338-8603-3f79d2111b2f" />
     Названия actions и resource реализованы в виде Enum (app/security/(ResourceEnum,ActionEnum)), для облегчения структуры базы данных
  <h3>3. Структура проекта</h3>
     Проект разделен на слои: Api,Logic -,где Api слой отвечает за прием HTTP-запросов,а Logic за выполнение всей бизнесс логики.<br>
     Также реализованы обработчики ошибок, что значительно облегчает читабельность кода

<h2>Замечания</h2>
<li> В реальных проектах стоит назначать JWT токену время жизни, а при его окончании запрашивать заново через токен восстановления. С таким изменением JWT токен из "Черного списка" можно будет удалять при запершении жизни токена (В этом случае рациональней будет использовать Redis, т.к. там есть встроенная ttl система)

<li> В локальной разработке использовал SQLite,однака благодаря использованию SQLAlchemy можно практически безболезненно перейти на другую СУБД(Например PostgreSQL)
   
<h2>Основной технологический стек:</h2>
<li>Python
<li>FastApi
<li>SQLite
<li>SQLAlchemy



